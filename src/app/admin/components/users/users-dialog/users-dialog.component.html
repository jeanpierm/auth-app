<form autocomplete="off" [formGroup]="userForm" (ngSubmit)="saveUser()">
  <p-dialog
    header="Create new user"
    [(visible)]="usersService.displayDialog"
    [modal]="true"
    [style]="{ width: '650px' }"
    (onHide)="userForm.reset()"
    close
  >
    <div class="field">
      <label for="name">Name</label>
      <input
        id="name"
        type="text"
        class="w-full"
        pInputText
        formControlName="name"
      />
      <small *ngIf="isInvalid('name')" id="name-help" class="p-error">
        <div *ngIf="name?.errors?.['required']">Name is required.</div>
      </small>
    </div>

    <div class="field">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        class="w-full"
        pInputText
        formControlName="email"
      />
      <small *ngIf="isInvalid('email')" id="email-help" class="p-error">
        <div *ngIf="email?.errors?.['required']">Email is required.</div>
        <div *ngIf="email?.errors?.['email']">Email must be valid.</div>
      </small>
    </div>

    <div class="field">
      <label for="email">Username</label>
      <input
        id="username"
        type="text"
        class="w-full"
        pInputText
        formControlName="username"
      />
      <small *ngIf="isInvalid('username')" id="username-help" class="p-error">
        <div *ngIf="username?.errors?.['required']">Username is required.</div>
        <div *ngIf="username?.errors?.['minlength']">
          Username must be at least 3 characters long.
        </div>
      </small>
    </div>

    <div class="field">
      <label class="block" for="password">Password</label>
      <input
        id="password"
        type="text"
        class="w-full"
        pInputText
        formControlName="password"
      />
      <small *ngIf="isInvalid('password')" id="password-help" class="p-error">
        <div *ngIf="password?.errors?.['required']">Password is required.</div>
        <div *ngIf="password?.errors?.['minlength']">
          Password must be at least 5 characters long.
        </div>
        <div *ngIf="password?.errors?.['doNotMatch']">
          Passwords must match.
        </div>
      </small>
    </div>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Save"
        class="p-button"
        icon="pi pi-check"
        type="submit"
        [disabled]="submitting"
      ></button>
      <button
        pButton
        pRipple
        label="Cancel"
        class="p-button-secondary p-button-text"
        icon="pi pi-times"
        type="button"
        (click)="closeDialog()"
      ></button>
    </ng-template>
  </p-dialog>
</form>
